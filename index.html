<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>No Limit Wordle</title>
<style>
  :root {
    --bg: #121213;
    --text: #ffffff;
    --tile-border: #3a3a3c;
    --absent: #3a3a3c;
    --present: #b59f3b;
    --correct: #538d4e;
    --key-bg: #818384;
  }

  body.light {
    --bg: #ffffff;
    --text: #000000;
    --tile-border: #d3d6da;
    --absent: #d3d6da;
    --key-bg: #d3d6da;
  }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }

  .game {
    text-align: center;
  }

  .row {
    display: flex;
    justify-content: center;
    margin-bottom: 5px;
  }

  .tile {
    width: 45px;
    height: 45px;
    border: 2px solid var(--tile-border);
    margin: 3px;
    font-size: 22px;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .correct { background: var(--correct); border-color: var(--correct); }
  .present { background: var(--present); border-color: var(--present); }
  .absent  { background: var(--absent); border-color: var(--absent); }

  .keyboard {
    margin-top: 10px;
  }

  .key {
    padding: 10px;
    margin: 3px;
    min-width: 30px;
    font-weight: bold;
    cursor: pointer;
    background: var(--key-bg);
    border: none;
  }

  button, select, label {
    margin: 5px;
    padding: 6px;
  }

  #restart { display: none; }
</style>
</head>
<body>

<div class="game">
  <h2>No Limit Wordle</h2>

  <label>
    Word Length:
    <select id="lengthSelect">
      <option>3</option>
      <option>4</option>
      <option selected>5</option>
      <option>6</option>
      <option>7</option>
      <option>8</option>
      <option>9</option>
      <option>10</option>
    </select>
  </label>

  <label>
    <input type="checkbox" id="hardMode"> Hard Mode
  </label>

  <button onclick="toggleTheme()">ðŸŒ—</button>
  <br>
  <button onclick="startGame()">Start</button>

  <div id="board"></div>
  <div class="keyboard" id="keyboard"></div>

  <p id="message"></p>
  <button id="restart" onclick="startGame()">Next Round</button>
</div>

<script>
const MAX_GUESSES = 6;
let WORD_LENGTH = 5;
let target = "";
let guess = "";
let rowIndex = 0;
let gameOver = false;
let knownGreens = [];
let knownYellows = new Set();

const board = document.getElementById("board");
const keyboardDiv = document.getElementById("keyboard");
const message = document.getElementById("message");

document.addEventListener("keydown", e => {
  if (gameOver) return;
  if (e.key === "Enter") submitGuess();
  else if (e.key === "Backspace") removeLetter();
  else if (/^[a-zA-Z]$/.test(e.key)) addLetter(e.key.toUpperCase());
});

function toggleTheme() {
  document.body.classList.toggle("light");
}

function randomWord(len) {
  return Array.from({length: len}, () =>
    String.fromCharCode(65 + Math.floor(Math.random() * 26))
  ).join("");
}

function startGame() {
  WORD_LENGTH = parseInt(document.getElementById("lengthSelect").value);
  target = randomWord(WORD_LENGTH);
  guess = "";
  rowIndex = 0;
  gameOver = false;
  knownGreens = Array(WORD_LENGTH).fill(null);
  knownYellows.clear();

  board.innerHTML = "";
  keyboardDiv.innerHTML = "";
  message.textContent = "";
  document.getElementById("restart").style.display = "none";

  for (let i = 0; i < MAX_GUESSES; i++) {
    const row = document.createElement("div");
    row.className = "row";
    for (let j = 0; j < WORD_LENGTH; j++) {
      const tile = document.createElement("div");
      tile.className = "tile";
      row.appendChild(tile);
    }
    board.appendChild(row);
  }

  createKeyboard();
}

function createKeyboard() {
  const rows = ["QWERTYUIOP", "ASDFGHJKL", "ZXCVBNM"];
  rows.forEach(r => {
    const row = document.createElement("div");
    [...r].forEach(l => {
      const btn = document.createElement("button");
      btn.className = "key";
      btn.textContent = l;
      btn.onclick = () => addLetter(l);
      row.appendChild(btn);
    });
    keyboardDiv.appendChild(row);
  });

  const enter = document.createElement("button");
  enter.textContent = "ENTER";
  enter.className = "key";
  enter.onclick = submitGuess;

  const back = document.createElement("button");
  back.textContent = "âŒ«";
  back.className = "key";
  back.onclick = removeLetter;

  keyboardDiv.appendChild(enter);
  keyboardDiv.appendChild(back);
}

function addLetter(letter) {
  if (guess.length < WORD_LENGTH) {
    const tile = board.children[rowIndex].children[guess.length];
    tile.textContent = letter;
    guess += letter;
  }
}

function removeLetter() {
  if (guess.length > 0) {
    guess = guess.slice(0, -1);
    board.children[rowIndex].children[guess.length].textContent = "";
  }
}

function submitGuess() {
  if (guess.length !== WORD_LENGTH) return;

  // Hard mode checks
  if (document.getElementById("hardMode").checked) {
    for (let i = 0; i < WORD_LENGTH; i++) {
      if (knownGreens[i] && guess[i] !== knownGreens[i]) {
        message.textContent = "Hard mode: keep green letters!";
        return;
      }
    }
    for (let y of knownYellows) {
      if (!guess.includes(y)) {
        message.textContent = "Hard mode: reuse yellow letters!";
        return;
      }
    }
  }

  const row = board.children[rowIndex].children;
  const temp = target.split("");

  for (let i = 0; i < WORD_LENGTH; i++) {
    row[i].className = "tile";
    if (guess[i] === target[i]) {
      row[i].classList.add("correct");
      knownGreens[i] = guess[i];
      temp[i] = null;
    }
  }

  for (let i = 0; i < WORD_LENGTH; i++) {
    if (row[i].classList.contains("correct")) continue;
    if (temp.includes(guess[i])) {
      row[i].classList.add("present");
      knownYellows.add(guess[i]);
      temp[temp.indexOf(guess[i])] = null;
    } else {
      row[i].classList.add("absent");
    }
  }

  if (guess === target) {
    message.textContent = "You win!";
    endGame();
    return;
  }

  rowIndex++;
  guess = "";

  if (rowIndex === MAX_GUESSES) {
    message.textContent = "The ord was: " + target;
    endGame();
  }
}

function endGame() {
  gameOver = true;
  document.getElementById("restart").style.display = "inline-block";
}
</script>

</body>
</html>
